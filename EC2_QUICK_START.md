# EC2 ì¸ìŠ¤í„´ìŠ¤ ë°°í¬ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

## ì¸ìŠ¤í„´ìŠ¤ ì •ë³´
- **ì¸ìŠ¤í„´ìŠ¤ ID**: `i-0577bbe710e991e38`
- **ì´ë¦„**: `ai_bootcamp`
- **í¼ë¸”ë¦­ IP**: `15.134.130.219`
- **ìƒíƒœ**: ì‹¤í–‰ ì¤‘

## ğŸš€ ë¹ ë¥¸ ë°°í¬ (5ë‹¨ê³„)

### 1ë‹¨ê³„: EC2 ì½˜ì†”ì—ì„œ "ì—°ê²°" ë²„íŠ¼ í´ë¦­

1. EC2 ì½˜ì†”ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ `i-0577bbe710e991e38` ì„ íƒ
2. ìƒë‹¨ **"ì—°ê²°"** ë²„íŠ¼ í´ë¦­
3. **"SSH í´ë¼ì´ì–¸íŠ¸"** íƒ­ ì„ íƒ
4. í‘œì‹œëœ SSH ëª…ë ¹ì–´ í™•ì¸ (ì˜ˆì‹œ):
   ```bash
   ssh -i "your-key.pem" ubuntu@15.134.130.219
   ```

### 2ë‹¨ê³„: ë¡œì»¬ í„°ë¯¸ë„ì—ì„œ SSH ì ‘ì†

**Mac (í˜„ì¬ ì‚¬ìš© ì¤‘):**
```bash
# í‚¤ íŒŒì¼ì´ ìˆëŠ” ìœ„ì¹˜ë¡œ ì´ë™
cd ~/Downloads  # ë˜ëŠ” í‚¤ íŒŒì¼ì´ ìˆëŠ” í´ë”

# í‚¤ íŒŒì¼ ê¶Œí•œ ì„¤ì •
chmod 400 your-key.pem

# SSH ì ‘ì†
ssh -i "your-key.pem" ubuntu@15.134.130.219
```

**í‚¤ íŒŒì¼ ì´ë¦„ì„ ëª¨ë¥´ë©´:**
- EC2 ì½˜ì†” â†’ "ì—°ê²°" â†’ "SSH í´ë¼ì´ì–¸íŠ¸" íƒ­ì—ì„œ í‚¤ íŒŒì¼ ì´ë¦„ í™•ì¸
- ë³´í†µ `.pem` í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼

### 3ë‹¨ê³„: ì„œë²„ ì„¤ì • (SSH ì ‘ì† í›„)

```bash
# 1. ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
sudo apt-get update

# 2. Node.js 20.x ì„¤ì¹˜
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# 3. ì„¤ì¹˜ í™•ì¸
node --version  # v20.x.x ë‚˜ì™€ì•¼ í•¨
npm --version

# 4. Git ì„¤ì¹˜
sudo apt-get install git -y

# 5. PM2 ì„¤ì¹˜ (í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬)
sudo npm install -g pm2
```

### 4ë‹¨ê³„: í”„ë¡œì íŠ¸ ì—…ë¡œë“œ

**ì˜µì…˜ A: Git ì‚¬ìš© (ì¶”ì²œ)**
```bash
# í™ˆ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd ~

# í”„ë¡œì íŠ¸ í´ë¡  (GitHub ì €ì¥ì†Œ URL ì‚¬ìš©)
git clone https://github.com/Kim-jaeyeon/ai-2026-c-team.git
cd ai-2026-c-team/driver_backend

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install
```

**ì˜µì…˜ B: SCPë¡œ ì§ì ‘ ì „ì†¡**
```bash
# ë¡œì»¬ í„°ë¯¸ë„ì—ì„œ (ìƒˆ í„°ë¯¸ë„ ì°½ ì—´ê¸°)
cd /Users/kimjaeyeon/ai-2026-c-team
scp -i "your-key.pem" -r driver_backend ubuntu@15.134.130.219:~/

# ì„œë²„ì—ì„œ
cd ~/driver_backend
npm install
```

### 5ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ë° ì„œë²„ ì‹¤í–‰

```bash
# .env íŒŒì¼ ìƒì„±
nano .env
```

ë‹¤ìŒ ë‚´ìš© ì…ë ¥:
```
PORT=3000
JWT_SECRET=your-very-secure-secret-key-change-this-in-production-2026
JWT_EXPIRES_IN=1h
REFRESH_TOKEN_EXPIRES_IN=7d
DB_PATH=/home/ubuntu/ai-2026-c-team/driver_backend/database.db
```

ì €ì¥: `Ctrl + X` â†’ `Y` â†’ `Enter`

```bash
# ì„œë²„ ì‹œì‘
pm2 start server.js --name driver-backend

# ìë™ ì‹œì‘ ì„¤ì •
pm2 startup
# ìœ„ ëª…ë ¹ì–´ê°€ ì¶œë ¥í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ë³µì‚¬í•´ì„œ ì‹¤í–‰
# ì˜ˆ: sudo env PATH=$PATH:/usr/bin pm2 startup systemd -u ubuntu --hp /home/ubuntu
pm2 save

# ìƒíƒœ í™•ì¸
pm2 status
pm2 logs driver-backend
```

### 6ë‹¨ê³„: ë³´ì•ˆ ê·¸ë£¹ ì„¤ì • (í¬íŠ¸ 3000 ì—´ê¸°)

EC2 ì½˜ì†”ì—ì„œ:
1. ì¸ìŠ¤í„´ìŠ¤ `i-0577bbe710e991e38` ì„ íƒ
2. **"ë³´ì•ˆ"** íƒ­ í´ë¦­
3. ë³´ì•ˆ ê·¸ë£¹ ì´ë¦„ í´ë¦­ (ì˜ˆ: `sg-xxxxx`)
4. **"ì¸ë°”ìš´ë“œ ê·œì¹™"** íƒ­ â†’ **"ê·œì¹™ í¸ì§‘"** í´ë¦­
5. **"ê·œì¹™ ì¶”ê°€"** í´ë¦­:
   - **ìœ í˜•**: ì‚¬ìš©ì ì§€ì • TCP
   - **í¬íŠ¸ ë²”ìœ„**: 3000
   - **ì†ŒìŠ¤**: 0.0.0.0/0 (ëª¨ë“  IP í—ˆìš©)
   - **ì„¤ëª…**: Backend API Server
6. **"ê·œì¹™ ì €ì¥"** í´ë¦­

### 7ë‹¨ê³„: ì„œë²„ í…ŒìŠ¤íŠ¸

ë¡œì»¬ í„°ë¯¸ë„ì—ì„œ (ë˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ):
```bash
# Health check
curl http://15.134.130.219:3000/api/health

# ì˜ˆìƒ ì‘ë‹µ:
# {"status":"OK","message":"ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤"}
```

ë¸Œë¼ìš°ì €ì—ì„œ:
- http://15.134.130.219:3000/api/health
- http://15.134.130.219:3000/admin (ê´€ë¦¬ì í˜ì´ì§€)

## âœ… ì™„ë£Œ í™•ì¸

ë‹¤ìŒì´ ëª¨ë‘ ì‘ë™í•˜ë©´ ì„±ê³µ:
- âœ… `http://15.134.130.219:3000/api/health` ì‘ë‹µ
- âœ… `http://15.134.130.219:3000/admin` ì ‘ì† ê°€ëŠ¥
- âœ… PM2ì—ì„œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘

## ğŸ”§ ìœ ìš©í•œ ëª…ë ¹ì–´

```bash
# ì„œë²„ ìƒíƒœ í™•ì¸
pm2 status

# ë¡œê·¸ í™•ì¸
pm2 logs driver-backend

# ì„œë²„ ì¬ì‹œì‘
pm2 restart driver-backend

# ì„œë²„ ì¤‘ì§€
pm2 stop driver-backend

# ì„œë²„ ì‚­ì œ
pm2 delete driver-backend
```

## ğŸ› ë¬¸ì œ í•´ê²°

### SSH ì ‘ì† ì•ˆ ë  ë•Œ
```bash
# í‚¤ íŒŒì¼ ê¶Œí•œ í™•ì¸
chmod 400 your-key.pem

# í‚¤ íŒŒì¼ ê²½ë¡œ í™•ì¸
ls -la your-key.pem

# ì—°ê²° í…ŒìŠ¤íŠ¸
ssh -v -i "your-key.pem" ubuntu@15.134.130.219
```

### ì„œë²„ê°€ ì‘ë‹µí•˜ì§€ ì•Šì„ ë•Œ
```bash
# PM2 ìƒíƒœ í™•ì¸
pm2 status

# í¬íŠ¸ ì‚¬ìš© í™•ì¸
sudo netstat -tlnp | grep 3000

# ë°©í™”ë²½ í™•ì¸
sudo ufw status
```

### í¬íŠ¸ê°€ ì—´ë ¤ìˆì§€ ì•Šì„ ë•Œ
- EC2 ì½˜ì†” â†’ ë³´ì•ˆ ê·¸ë£¹ â†’ ì¸ë°”ìš´ë“œ ê·œì¹™ í™•ì¸
- í¬íŠ¸ 3000ì´ ì¶”ê°€ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

ì„œë²„ê°€ ì •ìƒ ì‘ë™í•˜ë©´:
1. Vercel í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
   - `VITE_API_BASE_URL` = `http://15.134.130.219:3000/api`
2. í”„ë¡ íŠ¸ì—”ë“œ ì¬ë°°í¬
3. í…ŒìŠ¤íŠ¸

ì§€ê¸ˆ **"ì—°ê²°" ë²„íŠ¼ì„ í´ë¦­**í•´ì„œ ì‹œì‘í•˜ì„¸ìš”! ğŸš€
